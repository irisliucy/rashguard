<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>JOP Order — All Heart, All In</title>

  <style>
    :root { --ink:#111; --muted:#666; --line:#eaeaea; --bg:#fff; }
    body{
      margin:0; background:var(--bg); color:var(--ink);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      line-height:1.45;
    }
    .wrap{ max-width: 860px; margin: 0 auto; padding: 56px 16px 80px; }
    h1{ margin:0 0 8px; font-size: clamp(26px, 3.5vw, 40px); }
    .sub{ margin: 0 0 18px; color: var(--muted); max-width: 70ch; }
    .note{
      border-top: 1px solid var(--line); border-bottom: 1px solid var(--line);
      padding: 12px 0; margin: 18px 0 22px; color:#333; font-size: 13px;
    }
    .grid{ display:grid; grid-template-columns: 1fr; gap: 14px; }
    .card{ border:1px solid var(--line); border-radius: 14px; padding: 16px; }
    .row{ display:flex; gap: 12px; flex-wrap: wrap; }
    .col{ flex: 1 1 240px; }
    label{ display:block; font-weight: 650; margin: 10px 0 6px; font-size: 13px; color:#222; }
    .required{ color: #d32f2f; margin-left: 2px; }
    input[type="text"], input[type="email"], textarea, select{
      width:100%; box-sizing:border-box;
      padding: 10px 12px; border:1px solid #d9d9d9; border-radius: 12px;
      font-size: 14px; outline: none; background:#fff;
    }
    textarea{ resize: vertical; }
    table{ width:100%; border-collapse: collapse; margin-top: 10px; }
    th, td{ padding: 10px 8px; border-top:1px solid var(--line); text-align:left; }
    th{ font-size: 12px; color: var(--muted); font-weight: 700; letter-spacing: .02em; }
    .qty{
      width: 96px; padding: 8px 10px; border-radius: 12px; border: 1px solid #d9d9d9;
      font-size: 14px;
    }
    .muted{ color: var(--muted); font-size: 12px; }
    .totalRow{
      display:flex; justify-content: space-between; align-items: baseline;
      border-top:1px solid var(--line); padding-top: 14px; margin-top: 14px;
    }
    .totalLabel{ color: var(--muted); font-size: 12px; letter-spacing: .12em; text-transform: uppercase; }
    .total{ font-size: 22px; font-weight: 850; }
    .btns{ display:flex; gap: 10px; flex-wrap: wrap; margin-top: 12px; }
    button{
      border-radius: 999px; padding: 10px 14px; font-weight: 750;
      border: 1px solid #d9d9d9; background:#fff; cursor:pointer;
    }
    button.primary{ background:#111; border-color:#111; color:#fff; }
    .ok{ display:none; color:#0a7a2f; font-weight: 700; font-size: 13px; align-self:center; }
    .footer{ margin-top: 18px; color: var(--muted); font-size: 12px; }
    .pill{
      display:inline-block; padding: 2px 10px; border:1px solid var(--line);
      border-radius: 999px; font-size: 12px; color:#444; margin-left: 8px;
    }
    .story{
      margin: 24px 0; padding: 20px; background: #f9f9f9; border-radius: 14px;
      line-height: 1.6; color: #333;
    }
    .story p{ margin: 0 0 14px; }
    .story p:last-child{ margin-bottom: 0; }
    .products{ display: grid; grid-template-columns: 1fr; gap: 30px; margin: 32px 0; max-width: 500px; margin-left: auto; margin-right: auto; }
    .product{ text-align: center; }
    .product img{ 
      width: 100%; 
      height: auto; 
      max-height: 500px;
      object-fit: contain; 
      border-radius: 12px; 
      border: 1px solid var(--line); 
    }
    .product h3{ margin: 16px 0 6px; font-size: 18px; font-weight: 700; }
    .product .price{ color: var(--muted); font-size: 20px; font-weight: 650; }

    /* Responsive Design for Mobile, Tablet, and Desktop */
    @media (max-width: 768px) {
      .wrap{ padding: 32px 16px 60px; }
      h1{ font-size: clamp(22px, 5vw, 32px); }
      .story{ padding: 16px; font-size: 14px; }
      .card{ padding: 14px; }
      .products{ max-width: 100%; margin: 24px 0; }
      .product img{ max-height: 400px; }
      .product h3{ font-size: 16px; }
      .product .price{ font-size: 18px; }
      .note{ font-size: 12px; padding: 10px 0; }
      .pill{ font-size: 11px; padding: 2px 8px; margin-left: 6px; margin-top: 4px; }
      .row{ flex-direction: column; }
      .col{ flex: 1 1 100%; }
      table{ font-size: 14px; }
      th, td{ padding: 8px 6px; }
      .qty{ width: 80px; font-size: 14px; }
      button{ padding: 12px 18px; font-size: 15px; min-height: 44px; }
      .btns{ gap: 8px; }
      .total{ font-size: 20px; }
    }

    @media (min-width: 769px) and (max-width: 1024px) {
      /* Tablet styles */
      .wrap{ padding: 48px 24px 70px; }
      .products{ max-width: 600px; }
      .product img{ max-height: 550px; }
      .col{ flex: 1 1 280px; }
    }

    @media (min-width: 1025px) {
      /* Desktop - images can be side by side if desired */
      .products{ 
        grid-template-columns: repeat(2, 1fr); 
        max-width: 100%;
        gap: 40px;
      }
      .product img{ max-height: 500px; }
    }

    /* Custom Modal Popup */
    .modal-overlay{
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      padding: 16px;
    }
    .modal-overlay.show{ display: flex; }
    .modal{
      background: white;
      border-radius: 16px;
      padding: 32px 24px;
      max-width: 500px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      text-align: center;
      animation: slideUp 0.3s ease-out;
    }
    @keyframes slideUp{
      from{ transform: translateY(20px); opacity: 0; }
      to{ transform: translateY(0); opacity: 1; }
    }
    .modal h2{
      margin: 0 0 12px;
      font-size: 24px;
      color: #0a7a2f;
    }
    .modal p{
      margin: 0 0 24px;
      color: #333;
      line-height: 1.5;
      font-size: 16px;
    }
    .modal button{
      width: 100%;
      max-width: 200px;
      padding: 14px 24px;
      font-size: 16px;
      font-weight: 700;
      border-radius: 999px;
      background: #0a7a2f;
      color: white;
      border: none;
      cursor: pointer;
      transition: background 0.2s;
    }
    .modal button:hover{
      background: #086324;
    }
    @media (max-width: 768px) {
      .modal{
        padding: 24px 20px;
        margin: 16px;
      }
      .modal h2{ font-size: 20px; }
      .modal p{ font-size: 15px; }
      .modal button{
        max-width: 100%;
        min-height: 44px;
      }
    }
  </style>
</head>

<body>
  <main class="wrap">
    <h1>"All Heart All In" x JOP Rashguard Kit Pre-Order</h1>

    <div class="story">
      <p><strong>"All Heart, All In"</strong> is a motto I live by - on and off the mat.</p>
      <p>In every competition, I strive to give everything I have: courage, heart, relentlessness and fearlessness. You have to show up fully in every match, because nothing is guaranteed, not even a second one.</p>
      <p>In collaboration with <a href="https://jop-studio.com/" target="_blank" style="color: #0284c7; text-decoration: underline; font-weight: 600;">JOP Studio</a>, this kit is built for performance and made to stand out. Shine in this bright red kit!</p>
      <p><strong>15% of ALL SALES will be donated to <a href="https://www.tapcancerout.org/" target="_blank" style="color: #0284c7; text-decoration: underline; font-weight: 600;">TapCancerOut.Org</a> to combat cancer.</strong></p>
    </div>

    <div class="products">
      <div class="product">
        <img src="rashguard-image.png" alt="All Heart All In Rashguard" style="max-height: 600px;" />
        <h3>"All Heart All In" Rashguard</h3>
        <div class="price">$60</div>
      </div>
      <div class="product">
        <img src="shorts-image.png" alt="All Heart All In Shorts" />
        <h3>"All Heart All In" Shorts</h3>
        <div class="price">$50</div>
      </div>
    </div>

    <div class="note">
      <strong>15% of all sales</strong> will be donated to <a href="https://www.tapcancerout.org/" target="_blank" style="color: #0284c7; text-decoration: underline;">Tap Cancer Out</a> to combat cancer.
      <span class="pill">Rashguard $60</span>
      <span class="pill">Shorts $50</span>
    </div>

    <div class="grid">
      <!-- Customer -->
      <section class="card">
        <h2 style="margin:0 0 6px; font-size: 18px;">Your info</h2>
        <div class="row">
          <div class="col">
            <label for="name">Name<span class="required">*</span></label>
            <input id="name" type="text" placeholder="Your name" required />
          </div>
          <div class="col">
            <label for="email">Email<span class="required">*</span></label>
            <input id="email" type="email" placeholder="you@email.com" required />
          </div>
        </div>
        <div class="row">
          <div class="col">
            <label for="phone">Phone number<span class="required">*</span></label>
            <input id="phone" type="tel" placeholder="(123) 456-7890" required />
          </div>
        </div>
        <div class="row">
          <div class="col">
            <label for="handle">IG handle (optional)</label>
            <input id="handle" type="text" placeholder="@username" />
          </div>
          <div class="col">
            <label for="payment">Payment method<span class="required">*</span></label>
            <select id="payment" required>
              <option value="Venmo">Venmo</option>
              <option value="Zelle">Zelle</option>
              <option value="Others">Others</option>
            </select>
          </div>
        </div>

        <div id="otherPaymentRow" style="display:none;">
          <label for="otherPayment">Specify payment method<span class="required">*</span></label>
          <input id="otherPayment" type="text" placeholder="Enter payment method" />
        </div>

        <label for="address">Shipping address (optional)</label>
        <textarea id="address" rows="2" placeholder="If shipping, paste full address here"></textarea>

        <div class="muted" style="margin-top:8px;">
          Orders are confirmed after payment. Questions: IG@irisliu.bjj • irisliu.0616@gmail.com
        </div>
      </section>

      <!-- Rashguard -->
      <section class="card">
        <p class="sub" style="margin-top: 0;">
          Enter quantities next to each size (default 0). You can order multiple sizes/items in one submission.
        </p>
        
        <h2 style="margin:0; font-size: 18px;">Rashguard quantities</h2>
        <div class="muted">Unisex sizing. Enter 0 if none.</div>

        <table>
          <thead>
            <tr><th>Size</th><th>Qty</th><th class="muted">Guide</th></tr>
          </thead>
          <tbody id="rashBody"></tbody>
        </table>
      </section>

      <!-- Shorts -->
      <section class="card">
        <h2 style="margin:0; font-size: 18px;">Shorts quantities</h2>
        <div class="muted">Unisex sizing. Enter 0 if none.</div>

        <table>
          <thead>
            <tr><th>Size</th><th>Qty</th><th class="muted">Guide</th></tr>
          </thead>
          <tbody id="shortBody"></tbody>
        </table>
      </section>

      <!-- Summary -->
      <section class="card">
        <div class="totalRow">
          <div>
            <div class="totalLabel">Total</div>
            <div class="muted">Calculated automatically</div>
          </div>
          <div class="total">$<span id="total">0</span></div>
        </div>

        <div class="btns">
          <button class="primary" type="button" id="submitBtn">Submit order</button>
          <button type="button" id="copyBtn">Copy summary</button>
          <button type="button" id="resetBtn">Reset</button>
          <span id="ok" class="ok">Copied!</span>
        </div>

        <div id="formLink" style="display:none; margin-top: 16px; padding: 14px; background: #f0f9ff; border: 1px solid #0ea5e9; border-radius: 12px;">
          <strong style="color: #0369a1;">Popup blocked?</strong> 
          <a id="formUrl" href="#" target="_blank" style="color: #0284c7; text-decoration: underline; font-weight: 600;">Click here to open the Google Form</a>
        </div>

        <label for="summary">Order summary</label>
        <textarea id="summary" rows="8" readonly></textarea>

        <div class="footer">
          "Submit order" opens a Google Form prefilled with this info. Click "Submit" in google form to confirm your order.
        </div>
      </section>
    </div>
  </main>

  <!-- Custom Modal -->
  <div id="modalOverlay" class="modal-overlay">
    <div class="modal">
      <h2>✓ Thank You!</h2>
      <p>Google form will open in a new window. Confirm your final order and we'll be in touch shortly!</p>
      <button id="modalOk">Got it!</button>
    </div>
  </div>

  <script>
    // =======================
    // CONFIG YOU EDIT
    // =======================
    const PRICES = { rashguard: 60, shorts: 50 };

    // 1) Paste your Google Form "Get pre-filled link" URL here (must include entry.x=TEST params)
    const PREFILL_BASE = "https://docs.google.com/forms/d/e/1FAIpQLSdl1wq_Q0HgpCTmVcuQXx9jR8fHdWWYJTu0LH26kZk3HBr3Aw/viewform?usp=pp_url";

    // 2) Replace these entry IDs with the IDs from your prefill link
    // Example: if your prefill URL has ...&entry.123456=TESTNAME then name: "entry.123456"
    const FORM_FIELDS = {
      name: "entry.1884265043",
      email: "entry.1602166362",
      phone: "entry.1216066571",
      handle: "entry.60472379",
      payment: "entry.1026124694",
      address: "entry.1577854863",
      summary: "entry.1053287299",
      total: "entry.XXXXXXXXX",     // ADD TOTAL FIELD TO YOUR GOOGLE FORM IF NEEDED
    };

    // =======================
    // DATA
    // =======================
    const RASH_SIZES = [
      { size: "2XS", guide: "90–105 lbs" },
      { size: "XS",  guide: "105–125 lbs" },
      { size: "S",   guide: "125–145 lbs" },
      { size: "M",   guide: "145–165 lbs" },
      { size: "L",   guide: "165–185 lbs" },
      { size: "XL",  guide: "185–205 lbs" },
      { size: "XXL", guide: "205–230 lbs" },
    ];
    const SHORT_SIZES = [
      { size: "2XS", guide: "~24\" waist" },
      { size: "XS",  guide: "24\"–26\" waist" },
      { size: "S",   guide: "26\"–28\" waist" },
      { size: "M",   guide: "28\"–30\" waist" },
      { size: "L",   guide: "30\"–32\" waist" },
      { size: "XL",  guide: "32\"–34\" waist" },
      { size: "2XL", guide: "34\"–36\" waist" },
    ];

    const el = (id) => document.getElementById(id);

    function buildQtyRow(size, key, extraText) {
      const tr = document.createElement("tr");

      const tdSize = document.createElement("td");
      tdSize.textContent = size;

      const tdQty = document.createElement("td");
      const inp = document.createElement("input");
      inp.type = "number";
      inp.min = "0";
      inp.step = "1";
      inp.value = "0";
      inp.className = "qty";
      inp.dataset.key = key;
      inp.dataset.size = size;
      inp.addEventListener("input", () => {
        let v = parseInt(inp.value || "0", 10);
        if (Number.isNaN(v) || v < 0) v = 0;
        inp.value = String(v);
        update();
      });
      tdQty.appendChild(inp);

      tr.appendChild(tdSize);
      tr.appendChild(tdQty);

      if (extraText !== undefined) {
        const tdExtra = document.createElement("td");
        tdExtra.className = "muted";
        tdExtra.textContent = extraText;
        tr.appendChild(tdExtra);
      }

      return tr;
    }

    function renderTables() {
      const rashBody = el("rashBody");
      rashBody.innerHTML = "";
      for (const r of RASH_SIZES) {
        rashBody.appendChild(buildQtyRow(r.size, "rashguard", r.guide));
      }

      const shortBody = el("shortBody");
      shortBody.innerHTML = "";
      for (const s of SHORT_SIZES) {
        shortBody.appendChild(buildQtyRow(s.size, "shorts", s.guide));
      }
    }

    function getQtyMap() {
      const items = { rashguard: {}, shorts: {} };
      const inputs = Array.from(document.querySelectorAll("input.qty"));
      for (const inp of inputs) {
        const key = inp.dataset.key;
        const size = inp.dataset.size;
        const qty = parseInt(inp.value || "0", 10) || 0;
        if (qty > 0) items[key][size] = qty;
      }
      return items;
    }

    function calcTotal(items) {
      const rashQty = Object.values(items.rashguard).reduce((a,b)=>a+b,0);
      const shortQty = Object.values(items.shorts).reduce((a,b)=>a+b,0);
      return rashQty * PRICES.rashguard + shortQty * PRICES.shorts;
    }

    function formatLine(label, map) {
      const entries = Object.entries(map);
      if (entries.length === 0) return `${label}: (none)`;
      return `${label}: ` + entries.map(([size, qty]) => `${size} x${qty}`).join(", ");
    }

    function buildOrderSummary(items, total) {
      // Summary for Google Form (order details only, no user info)
      const lines = [];
      lines.push(formatLine("Rashguard ($60)", items.rashguard));
      lines.push(formatLine("Shorts ($50)", items.shorts));
      lines.push("");
      lines.push(`Total: $${total}`);
      const donation = (total * 0.15).toFixed(2);
      lines.push(`Donation (15%): $${donation} to TapCancerOut.org`);
      return lines.join("\n");
    }

    function buildSummary(items, total) {
      const lines = [];
      lines.push("All Heart, All In — Order Summary");
      lines.push("--------------------------------");
      const name = el("name").value.trim();
      const email = el("email").value.trim();
      const phone = el("phone").value.trim();
      const handle = el("handle").value.trim();
      const payment = el("payment").value;
      const otherPayment = el("otherPayment").value.trim();
      const address = el("address").value.trim();

      if (name) lines.push(`Name: ${name}`);
      if (email) lines.push(`Email: ${email}`);
      if (phone) lines.push(`Phone: ${phone}`);
      if (handle) lines.push(`IG: ${handle}`);
      
      if (payment === "Others" && otherPayment) {
        lines.push(`Payment: ${otherPayment}`);
      } else {
        lines.push(`Payment: ${payment}`);
      }
      
      if (address) lines.push(`Shipping: ${address}`);
      lines.push("");
      lines.push(formatLine("Rashguard ($60)", items.rashguard));
      lines.push(formatLine("Shorts ($50)", items.shorts));
      lines.push("");
      lines.push(`Total: $${total}`);
      
      const donation = (total * 0.15).toFixed(2);
      lines.push("");
      lines.push(`Thank you for your order. You have donated $${donation} to TapCancerOut.org`);
      return lines.join("\n");
    }

    function update() {
      const items = getQtyMap();
      const total = calcTotal(items);
      el("total").textContent = String(total);
      el("summary").value = buildSummary(items, total);
    }

    async function copySummary() {
      const text = el("summary").value;
      try {
        await navigator.clipboard.writeText(text);
      } catch {
        el("summary").focus();
        el("summary").select();
        document.execCommand("copy");
      }
      el("ok").style.display = "inline";
      setTimeout(() => el("ok").style.display = "none", 1200);
    }

    function resetAll() {
      el("name").value = "";
      el("email").value = "";
      el("phone").value = "";
      el("handle").value = "";
      el("payment").value = "Venmo";
      el("otherPayment").value = "";
      document.getElementById("otherPaymentRow").style.display = "none";
      document.getElementById("formLink").style.display = "none";
      el("address").value = "";
      for (const inp of document.querySelectorAll("input.qty")) inp.value = "0";
      update();
    }

    function submitOrder() {
      const name = el("name").value.trim();
      const email = el("email").value.trim();
      const phone = el("phone").value.trim();
      
      if (!name) { alert("Please enter your name before submitting."); return; }
      if (!email) { alert("Please enter your email before submitting."); return; }
      if (!phone) { alert("Please enter your phone number before submitting."); return; }

      const items = getQtyMap();
      const total = calcTotal(items);
      const orderSummary = buildOrderSummary(items, total);
      
      const handle = el("handle").value.trim();
      const payment = el("payment").value;
      const otherPayment = el("otherPayment").value.trim();
      const address = el("address").value.trim();

      // Check if "Others" is selected but no payment method specified
      if (payment === "Others" && !otherPayment) {
        alert("Please specify your payment method.");
        return;
      }

      if (!PREFILL_BASE || PREFILL_BASE.includes("PASTE_YOUR")) {
        alert("Backend not configured yet: paste your Google Form prefilled link into PREFILL_BASE.");
        return;
      }

      const url = new URL(PREFILL_BASE);
      url.searchParams.set(FORM_FIELDS.name, name);
      url.searchParams.set(FORM_FIELDS.email, email);
      url.searchParams.set(FORM_FIELDS.phone, phone);
      url.searchParams.set(FORM_FIELDS.handle, handle);
      
      // Send the actual payment method (or "Others: ..." if specified)
      const finalPayment = payment === "Others" && otherPayment ? `Others: ${otherPayment}` : payment;
      url.searchParams.set(FORM_FIELDS.payment, finalPayment);
      
      url.searchParams.set(FORM_FIELDS.address, address);
      if (FORM_FIELDS.summary && !FORM_FIELDS.summary.includes("XXXX")) {
        url.searchParams.set(FORM_FIELDS.summary, orderSummary);
      }
      if (FORM_FIELDS.total && !FORM_FIELDS.total.includes("XXXX")) {
        url.searchParams.set(FORM_FIELDS.total, `$${total}`);
      }

      // Show custom modal instead of alert
      const modalOverlay = document.getElementById("modalOverlay");
      modalOverlay.classList.add("show");
      
      // Show the form link in case popup is blocked
      const formLinkDiv = document.getElementById("formLink");
      const formUrlLink = document.getElementById("formUrl");
      formUrlLink.href = url.toString();
      formLinkDiv.style.display = "block";
      
      window.open(url.toString(), "_blank");
    }

    // Close modal when clicking OK button
    document.getElementById("modalOk").addEventListener("click", () => {
      document.getElementById("modalOverlay").classList.remove("show");
    });

    // Close modal when clicking outside
    document.getElementById("modalOverlay").addEventListener("click", (e) => {
      if (e.target.id === "modalOverlay") {
        document.getElementById("modalOverlay").classList.remove("show");
      }
    });

    // Wire up
    renderTables();
    update();

    ["name","email","phone","handle","payment","address","otherPayment"].forEach(id => {
      el(id).addEventListener("input", update);
      el(id).addEventListener("change", update);
    });

    // Show/hide "Others" payment input
    el("payment").addEventListener("change", () => {
      const otherRow = document.getElementById("otherPaymentRow");
      if (el("payment").value === "Others") {
        otherRow.style.display = "block";
      } else {
        otherRow.style.display = "none";
        el("otherPayment").value = "";
      }
    });

    el("copyBtn").addEventListener("click", copySummary);
    el("resetBtn").addEventListener("click", resetAll);
    el("submitBtn").addEventListener("click", submitOrder);
  </script>
</body>
</html>
